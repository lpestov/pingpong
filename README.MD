# Ping-Pong Система на C++: Клиент-Серверное Приложение

## Описание проекта
Это простой пример реализации системы клиент-сервер на языке C++, в которой клиент отправляет сообщение **"Заяц"** (PING), а сервер отвечает **"Волк"** (PONG). 

---

## Возможности
- **Клиент**:
    - Отправляет запросы **PING** (Заяц) серверу.
    - Получает ответ **PONG** (Волк) от сервера.
    - Поддержка параметров:
        - `-w <timeout>`: интервал ожидания между отправкой сообщений.
        - `-n <packets>`: количество сообщений, которые нужно отправить.
        - `-t`: бесконечный режим отправки сообщений.
        - `<host>:<port>`: адрес сервера для подключения.

- **Сервер**:
    - Слушает подключение клиентов на указанном порту.
    - Обрабатывает запросы **PING** (Заяц) и отвечает **PONG** (Волк).
    - Автоматически завершает соединение с клиентом при некорректном запросе.

- **Обработка сигналов SIGINT**:
    - Клиент и сервер корректно завершают работу при нажатии **Ctrl+C**.

---

## Системные требования
- Linux/Unix-подобная операционная система.

---

## Сборка
### Компиляция клиентской программы
```bash
g++ client.cpp -o client
```

### Компиляция серверной программы
```bash
g++ server.cpp -o server
```

---

## Использование

### 1. Запуск сервера
Для запуска сервера используйте следующую команду:
```bash
./server -p <port>
```
- **`<port>`** — порт для ожидания подключений (например, 8080).

Пример:
```bash
./server -p 8080
```

### 2. Запуск клиента
Для подключения клиента к серверу используйте следующую команду: (в новом терминале)
```bash
./client <host>:<port> [-w <timeout>] [-n <packets>] [-t]
```

- **`<host>`** — адрес сервера (например, `127.0.0.1`).
- **`<port>`** — порт для подключения (например, 8080).
- `-w <timeout>` — интервал между отправкой сообщений (в секундах, по умолчанию 1 секунда).
- `-n <packets>` — количество сообщений для отправки (по умолчанию 4 сообщения).
- `-t` — бесконечный режим отправки сообщений.

Пример:
```bash
./client 127.0.0.1:8080 -w 2 -n 10
```
Или для бесконечного режима:
```bash
./client 127.0.0.1:8080 -t
```

---

## Пример работы
### Сервер:
```bash
./server -p 8080
```
Вывод сервера:
```
Сервер запущен на порту 8080...
Сервер ожидает подключение...
Подключился клиент: 127.0.0.1:12345
Получено: Заяц
Отправлено: Волк
Клиент закрыл соединение...
```

### Клиент:
```bash
./client 127.0.0.1:8080 -w 1 -n 3
```
Вывод клиента:
```
Отправлено: Заяц
Получено: Волк
Отправлено: Заяц
Получено: Волк
Отправлено: Заяц
Получено: Волк
```

---

## Особенности
- **Обработка ошибок**:
    - Соединение автоматически восстанавливается, если сервер временно недоступен.
    - Сервер завершает соединение, если получено некорректное сообщение.
- **Удобство использования**:
    - Гибкая настройка параметров с помощью флагов командной строки.
- **Корректное завершение**:
    - При нажатии **Ctrl+C** сервер и клиент завершают работу без зависших ресурсов.


---

## Лицензия

Этот репозиторий распространяется под лицензией MIT. Подробнее см. в файле [LICENSE](https://github.com/lpestov/pingpong/blob/master/LICENSE).